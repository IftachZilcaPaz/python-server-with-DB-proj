

![image](https://github.com/IftachZilcaPaz/ci_cd_github_action_aws/assets/151572520/c4b1a850-020a-42af-942a-37f0a8796a49)

---

<p>
<h1> Hey Again &nbsp;<img src="https://raw.githubusercontent.com/MartinHeinz/MartinHeinz/master/wave.gif" height="45" width="45"/>&nbsp;&nbsp;Welcome To My "Python Server Proj" &nbsp;=)</h1>
</p>
<br/>

<img src="https://cdn.hashnode.com/res/hashnode/image/upload/v1689486594104/0883007c-df25-4d04-90f9-16a033cece42.gif" align="right" height="250" width="350" />


 <!--- ## üîó Links
[![portfolio](https://img.shields.io/badge/my_portfolio-000?style=for-the-badge&logo=ko-fi&logoColor=white)](https://katherineoelsner.com/)
[![linkedin](https://img.shields.io/badge/linkedin-0A66C2?style=for-the-badge&logo=linkedin&logoColor=white)](https://www.linkedin.com/)
[![twitter](https://img.shields.io/badge/twitter-1DA1F2?style=for-the-badge&logo=twitter&logoColor=white)](https://twitter.com/)
--->

## üåê Socials:
[![LinkedIn](https://img.shields.io/badge/LinkedIn-%230077B5.svg?logo=linkedin&logoColor=white)](https://www.linkedin.com/in/iftach-z-19931491/) 
<!---
<img align="center" src="https://raw.githubusercontent.com/rahuldkjain/github-profile-readme-generator/master/src/images/icons/Social/linked-in-alt.svg" alt="https://www.linkedin.com/in/iftach-z-19931491/" height="30" width="40" />
--->

## üíª Languages and Tools:

![Python](https://img.shields.io/badge/python-3670A0?style=flat&logo=python&logoColor=ffdd54) ![MySQL](https://img.shields.io/badge/mysql-%2300000f.svg?style=flat&logo=mysql&logoColor=white)



# Lots-Of-Trips: Automated Public Transportation System

This is the final project for the Python Course. Lots-Of-Trips is an automated public transportation system built as a client-server application. Clients send requests to the server and receive relevant responses, ensuring the satisfaction of each request.

# Python Final Project (v1.1)

## Table of Contents

- [Overview](#overview)
- [Prerequisites](#prerequisites)
- [Installation](#installation)
- [Usage](#usage)
- [Configuration](#configuration)
- [Contributing](#contributing)
- [License](#license)

## Overview
This project involves creating a database server that communicates with multiple clients representing "water-stations". The project consists of the following files:
- `server.py`: Represents the server.
- `data.sqlite`: SQLite 3 database used by the server to store data on the clients (generated by `server.py` on the first run).
- `client.py`: Represents a single client. This file is meant to be copied to different folders and executed separately.
- `status.txt`: Represents the data of the client. Each `status.txt` is copied to the same folder as `client.py` and contains different data (at least a different ID).

For the assignment, you need to present at least three files: `server.py`, `client.py`, and `status.txt`. These files can be zipped before sending. The `data.sqlite` file is generated by `server.py` on the first run.

## Prerequisites
- Python 3.x
- SQLite 3

## Installation
1. Clone the repository to your local machine.
   ```bash
   git clone <repository-url>
   cd <repository-directory>


## Usage

### Running the Server
1. Navigate to the directory containing `server.py`.
2. Run the server script.
   ```bash
   python server.py
   ```
### Running the Clients
1. Copy `client.py` and `status.txt` to different folders for each client.
2. Modify each `status.txt` to have unique data.
3. Navigate to each folder and run `client.py`.
   ```bash
   python client.py
   ```

### Client Code Explanation
The client runs in a loop where it:
- Reads data from `status.txt`.
- Connects to the server.
- Sends the data to the server.

This loop executes every 60 seconds (modifiable via a global variable for testing purposes).

#### `status.txt` Format
The `status.txt` file contains the data of a single water station in the following format:
- First line: Station ID (integer).
- Second line: State of Alarm1 (0 for OFF, 1 for ON).
- Third line: State of Alarm2 (0 for OFF, 1 for ON).

Example:
123
0
1

|| This represents station ID 123, with Alarm1 OFF and Alarm2 ON.


### Client Program
The client program should:
- Close `status.txt` after reading from it to allow changes from outside (e.g., using Notepad or gedit).
- Send the data to the server as an encoded string, separating values with spaces (e.g., "123 1 0").

### Server Code Explanation
The server:
1. Opens `data.sqlite` (creates it if it doesn't exist).
2. Creates a table for the station data if it doesn't exist:
   ```sql
   CREATE TABLE IF NOT EXISTS station_status (
       station_id INT,
       last_date TEXT,
       alarm1 INT,
       alarm2 INT,
       PRIMARY KEY(station_id)
   );
   ```

Enters a loop to:
- Wait for client data.
- Update the database each time data is received.

### Database Schema
The `station_status` table contains:
- `station_id`: Primary key representing the station ID.
- `last_date`: Text representing the last date the station contacted the server.
- `alarm1`: 0 or 1 representing if Alarm1 is off or on.
- `alarm2`: 0 or 1 representing if Alarm2 is off or on.

### Date Format
Store the date in the following format:

"YYYY-MM-DD HH:mm"

Example:
```python
import datetime
last_date = datetime.datetime.now().strftime('%Y-%M-%d %H:%m')
print(last_date)
```

### Handling Data
When receiving data:
- If the station ID doesn't exist in the database, insert a new row.
- If the station ID exists, update the existing row.

Use `INSERT OR REPLACE` to handle both insert and update with the same query.

## Configuration
- Ensure the server is SQL-injection safe.
- For testing, the server socket binds to IP `127.0.0.1`.
- The server uses a single port.
- Add exception handling to prevent the server from crashing if a client disconnects or crashes.
- The server should handle incoming data from multiple clients running simultaneously from different folders.

## Contributing
Please fork the repository and submit pull requests for any improvements or bug fixes.

## License
This project is licensed under the MIT License - see the [LICENSE](LICENSE) file for details.

